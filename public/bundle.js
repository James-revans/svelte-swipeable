"use strict";function noop(){}function assign(t,n){for(const e in n)t[e]=n[e];return t}function run(t){return t()}function blank_object(){return Object.create(null)}function run_all(t){t.forEach(run)}function is_function(t){return"function"==typeof t}function safe_not_equal(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function subscribe(t,...n){if(null==t)return noop;const e=t.subscribe(...n);return e.unsubscribe?()=>e.unsubscribe():e}function component_subscribe(t,n,e){t.$$.on_destroy.push(subscribe(n,e))}function create_slot(t,n,e,i){if(t){const o=get_slot_context(t,n,e,i);return t[0](o)}}function get_slot_context(t,n,e,i){return t[1]&&i?assign(e.ctx.slice(),t[1](i(n))):e.ctx}function get_slot_changes(t,n,e,i){if(t[2]&&i){const o=t[2](i(e));if("object"==typeof n.dirty){const t=[],e=Math.max(n.dirty.length,o.length);for(let i=0;i<e;i+=1)t[i]=n.dirty[i]|o[i];return t}return n.dirty|o}return n.dirty}function action_destroyer(t){return t&&is_function(t.destroy)?t.destroy:noop}Object.defineProperty(exports,"__esModule",{value:!0});const is_client="undefined"!=typeof window;let now=is_client?()=>window.performance.now():()=>Date.now(),raf=is_client?t=>requestAnimationFrame(t):noop;const tasks=new Set;function run_tasks(t){tasks.forEach(n=>{n.c(t)||(tasks.delete(n),n.f())}),0!==tasks.size&&raf(run_tasks)}function loop(t){let n;return 0===tasks.size&&raf(run_tasks),{promise:new Promise(e=>{tasks.add(n={c:t,f:e})}),abort(){tasks.delete(n)}}}function insert(t,n,e){t.insertBefore(n,e||null)}function detach(t){t.parentNode.removeChild(t)}function element(t){return document.createElement(t)}function listen(t,n,e,i){return t.addEventListener(n,e,i),()=>t.removeEventListener(n,e,i)}function attr(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function children(t){return Array.from(t.childNodes)}let current_component;function set_current_component(t){current_component=t}const dirty_components=[],binding_callbacks=[],render_callbacks=[],flush_callbacks=[],resolved_promise=Promise.resolve();let update_scheduled=!1;function schedule_update(){update_scheduled||(update_scheduled=!0,resolved_promise.then(flush))}function add_render_callback(t){render_callbacks.push(t)}let flushing=!1;const seen_callbacks=new Set;function flush(){if(!flushing){flushing=!0;do{for(let t=0;t<dirty_components.length;t+=1){const n=dirty_components[t];set_current_component(n),update(n.$$)}for(dirty_components.length=0;binding_callbacks.length;)binding_callbacks.pop()();for(let t=0;t<render_callbacks.length;t+=1){const n=render_callbacks[t];seen_callbacks.has(n)||(seen_callbacks.add(n),n())}render_callbacks.length=0}while(dirty_components.length);for(;flush_callbacks.length;)flush_callbacks.pop()();update_scheduled=!1,flushing=!1,seen_callbacks.clear()}}function update(t){if(null!==t.fragment){t.update(),run_all(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(add_render_callback)}}const outroing=new Set;let outros;function transition_in(t,n){t&&t.i&&(outroing.delete(t),t.i(n))}function transition_out(t,n,e,i){if(t&&t.o){if(outroing.has(t))return;outroing.add(t),outros.c.push(()=>{outroing.delete(t),i&&(e&&t.d(1),i())}),t.o(n)}}function mount_component(t,n,e){const{fragment:i,on_mount:o,on_destroy:s,after_update:r}=t.$$;i&&i.m(n,e),add_render_callback(()=>{const n=o.map(run).filter(is_function);s?s.push(...n):run_all(n),t.$$.on_mount=[]}),r.forEach(add_render_callback)}function destroy_component(t,n){const e=t.$$;null!==e.fragment&&(run_all(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}function make_dirty(t,n){-1===t.$$.dirty[0]&&(dirty_components.push(t),schedule_update(),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function init(t,n,e,i,o,s,r=[-1]){const c=current_component;set_current_component(t);const u=n.props||{},a=t.$$={fragment:null,ctx:null,props:s,update:noop,not_equal:o,bound:blank_object(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(c?c.$$.context:[]),callbacks:blank_object(),dirty:r};let l=!1;a.ctx=e?e(t,u,(n,e,...i)=>{const s=i.length?i[0]:e;return a.ctx&&o(a.ctx[n],a.ctx[n]=s)&&(a.bound[n]&&a.bound[n](s),l&&make_dirty(t,n)),e}):[],a.update(),l=!0,run_all(a.before_update),a.fragment=!!i&&i(a.ctx),n.target&&(n.hydrate?a.fragment&&a.fragment.l(children(n.target)):a.fragment&&a.fragment.c(),n.intro&&transition_in(t.$$.fragment),mount_component(t,n.target,n.anchor),flush()),set_current_component(c)}class SvelteComponent{$destroy(){destroy_component(this,1),this.$destroy=noop}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(){}}const subscriber_queue=[];function writable(t,n=noop){let e;const i=[];function o(n){if(safe_not_equal(t,n)&&(t=n,e)){const n=!subscriber_queue.length;for(let n=0;n<i.length;n+=1){const e=i[n];e[1](),subscriber_queue.push(e,t)}if(n){for(let t=0;t<subscriber_queue.length;t+=2)subscriber_queue[t][0](subscriber_queue[t+1]);subscriber_queue.length=0}}}return{set:o,update:function(n){o(n(t))},subscribe:function(s,r=noop){const c=[s,r];return i.push(c),1===i.length&&(e=n(o)||noop),s(t),()=>{const t=i.indexOf(c);-1!==t&&i.splice(t,1),0===i.length&&(e(),e=null)}}}}function is_date(t){return"[object Date]"===Object.prototype.toString.call(t)}function tick_spring(t,n,e,i){if("number"==typeof e||is_date(e)){const o=i-e,s=(e-n)/(t.dt||1/60),r=(s+(t.opts.stiffness*o-t.opts.damping*s)*t.inv_mass)*t.dt;return Math.abs(r)<t.opts.precision&&Math.abs(o)<t.opts.precision?i:(t.settled=!1,is_date(e)?new Date(e.getTime()+r):e+r)}if(Array.isArray(e))return e.map((o,s)=>tick_spring(t,n[s],e[s],i[s]));if("object"==typeof e){const o={};for(const s in e)o[s]=tick_spring(t,n[s],e[s],i[s]);return o}throw new Error(`Cannot spring ${typeof e} values`)}function spring(t,n={}){const e=writable(t),{stiffness:i=.15,damping:o=.8,precision:s=.01}=n;let r,c,u,a=t,l=t,d=1,p=0,f=!1;function m(n,i={}){l=n;const o=u={};if(null==t||i.hard||h.stiffness>=1&&h.damping>=1)return f=!0,r=now(),a=n,e.set(t=l),Promise.resolve();if(i.soft){const t=!0===i.soft?.5:+i.soft;p=1/(60*t),d=0}return c||(r=now(),f=!1,c=loop(n=>{if(f)return f=!1,c=null,!1;const i={inv_mass:d=Math.min(d+p,1),opts:h,settled:!0,dt:60*(n-r)/1e3},o=tick_spring(i,a,t,l);return r=n,a=t,e.set(t=o),i.settled&&(c=null),!i.settled})),new Promise(t=>{c.promise.then(()=>{o===u&&t()})})}const h={set:m,update:(n,e)=>m(n(l,t),e),subscribe:e.subscribe,stiffness:i,damping:o,precision:s};return h}function swipe(t,n={threshX:0,threshY:0}){let e,i,o={x:void 0,y:void 0},s={x:void 0,y:void 0};function r(n){e=n.clientX,i=n.clientY,o.x=n.clientX,o.y=n.clientY,t.dispatchEvent(new CustomEvent("swipeStart",{detail:{x:e,y:i}})),window.addEventListener("mousemove",c),window.addEventListener("mouseup",u)}function c(r){const c=r.clientX-e,u=r.clientY-i;e=r.clientX,i=r.clientY,s.x=e-o.x>n.threshX?"right":o.x-e>n.threshX?"left":void 0,s.y=i-o.y>n.threshY?"down":o.y-i>n.threshY?"up":void 0,t.dispatchEvent(new CustomEvent("swipeMove",{detail:{x:e,y:i,dx:c,dy:u,initial:o,direction:s}}))}function u(r){e=r.clientX,i=r.clientY,o.y-i>=n.threshY&&t.dispatchEvent(new CustomEvent("swipeUp",{detail:{x:e,y:i,initial:o,direction:s}})),i-o.y>=n.threshY&&t.dispatchEvent(new CustomEvent("swipeDown",{detail:{x:e,y:i,initial:o,direction:s}})),o.x-e>=n.threshX&&t.dispatchEvent(new CustomEvent("swipeRight",{detail:{x:e,y:i,initial:o,direction:s}})),e-o.x>=n.threshX&&t.dispatchEvent(new CustomEvent("swipeLeft",{detail:{x:e,y:i,initial:o,direction:s}})),t.dispatchEvent(new CustomEvent("swipeEnd",{detail:{x:e,y:i,initial:o,direction:s}})),window.removeEventListener("mousemove",c),window.removeEventListener("mouseup",u)}return t.addEventListener("mousedown",r),{destroy(){t.removeEventListener("mousedown",r)}}}function create_fragment(t){let n,e,i,o;const s=t[19].default,r=create_slot(s,t,t[18],null);return{c(){n=element("div"),r&&r.c(),attr(n,"class","container"),attr(n,"style",t[6])},m(s,c){insert(s,n,c),r&&r.m(n,null),i=!0,o=[action_destroyer(e=swipe.call(null,n,t[0])),listen(n,"swipeStart",t[7]),listen(n,"swipeMove",t[8]),listen(n,"swipeEnd",t[9]),listen(n,"swipeUp",function(){is_function(t[1])&&t[1].apply(this,arguments)}),listen(n,"swipeDown",function(){is_function(t[2])&&t[2].apply(this,arguments)}),listen(n,"swipeRight",function(){is_function(t[3])&&t[3].apply(this,arguments)}),listen(n,"swipeLeft",function(){is_function(t[4])&&t[4].apply(this,arguments)})]},p(o,[c]){t=o,r&&r.p&&262144&c&&r.p(get_slot_context(s,t,t[18],null),get_slot_changes(s,t[18],c,null)),(!i||64&c)&&attr(n,"style",t[6]),e&&is_function(e.update)&&1&c&&e.update.call(null,t[0])},i(t){i||(transition_in(r,t),i=!0)},o(t){transition_out(r,t),i=!1},d(t){t&&detach(n),r&&r.d(t),run_all(o)}}}function instance(t,n,e){let i,{stiffness:o=null}=n,{damping:s=null}=n,{willReturn:r=!0}=n,{momentum:c=0}=n,{options:u}=n,{onSwipeUp:a}=n,{onSwipeDown:l}=n,{onSwipeRight:d}=n,{onSwipeLeft:p}=n,f={x:0,y:0};const m=spring({x:0,y:0},{stiffness:0,damping:0});component_subscribe(t,m,t=>e(16,i=t));let h,_,{direction:w}=n,{$$slots:y={},$$scope:g}=n;return t.$set=(t=>{"stiffness"in t&&e(10,o=t.stiffness),"damping"in t&&e(11,s=t.damping),"willReturn"in t&&e(12,r=t.willReturn),"momentum"in t&&e(13,c=t.momentum),"options"in t&&e(0,u=t.options),"onSwipeUp"in t&&e(1,a=t.onSwipeUp),"onSwipeDown"in t&&e(2,l=t.onSwipeDown),"onSwipeRight"in t&&e(3,d=t.onSwipeRight),"onSwipeLeft"in t&&e(4,p=t.onSwipeLeft),"direction"in t&&e(14,w=t.direction),"$$scope"in t&&e(18,g=t.$$scope)}),t.$$.update=(()=>{65536&t.$$.dirty&&e(17,h={vertical:`transform: translateY(${i.y}px)`,horizontal:`transform: translateX(${i.x}px)`,any:`transform: translate(${i.x}px, ${i.y}px)`,up:function(){if(i.y<=0)return`transform: translateY(${i.y}px)`}(),down:function(){if(i.y>=0)return`transform: translateY(${i.y}px)`}(),right:function(){if(i.x>=0)return`transform: translateX(${i.x}px)`}(),left:function(){if(i.x<=0)return`transform: translateX(${i.x}px)`}()}),147456&t.$$.dirty&&e(6,_=h[w])}),[u,a,l,d,p,m,_,function(){e(5,m.stiffness=e(5,m.damping=1,m),m)},function(t){f.x=i.x,f.y=i.y,m.update(n=>({x:n.x+t.detail.dx,y:n.y+t.detail.dy}))},function(t){e(5,m.damping=s||1,m),r?(e(5,m.stiffness=o||0,m),m.set({x:0,y:0})):c>0&&(e(5,m.stiffness=o,m),m.update(t=>({x:t.x+(t.x-f.x)*(20*c),y:t.y+(t.y-f.y)*(20*c)})))},o,s,r,c,w,f,i,h,g,y]}class Animations extends SvelteComponent{constructor(t){super(),init(this,t,instance,create_fragment,safe_not_equal,{stiffness:10,damping:11,willReturn:12,momentum:13,options:0,onSwipeUp:1,onSwipeDown:2,onSwipeRight:3,onSwipeLeft:4,direction:14})}}function swipe$1(t,n={threshX:0,threshY:0}){let e,i,o={x:void 0,y:void 0},s={x:void 0,y:void 0};function r(n){e=n.clientX,i=n.clientY,o.x=n.clientX,o.y=n.clientY,t.dispatchEvent(new CustomEvent("swipeStart",{detail:{x:e,y:i}})),window.addEventListener("mousemove",c),window.addEventListener("mouseup",u)}function c(r){const c=r.clientX-e,u=r.clientY-i;e=r.clientX,i=r.clientY,s.x=e-o.x>n.threshX?"right":o.x-e>n.threshX?"left":void 0,s.y=i-o.y>n.threshY?"down":o.y-i>n.threshY?"up":void 0,t.dispatchEvent(new CustomEvent("swipeMove",{detail:{x:e,y:i,dx:c,dy:u,initial:o,direction:s}}))}function u(r){e=r.clientX,i=r.clientY,o.y-i>=n.threshY&&t.dispatchEvent(new CustomEvent("swipeUp",{detail:{x:e,y:i,initial:o,direction:s}})),i-o.y>=n.threshY&&t.dispatchEvent(new CustomEvent("swipeDown",{detail:{x:e,y:i,initial:o,direction:s}})),o.x-e>=n.threshX&&t.dispatchEvent(new CustomEvent("swipeRight",{detail:{x:e,y:i,initial:o,direction:s}})),e-o.x>=n.threshX&&t.dispatchEvent(new CustomEvent("swipeLeft",{detail:{x:e,y:i,initial:o,direction:s}})),t.dispatchEvent(new CustomEvent("swipeEnd",{detail:{x:e,y:i,initial:o,direction:s}})),window.removeEventListener("mousemove",c),window.removeEventListener("mouseup",u)}return t.addEventListener("mousedown",r),{destroy(){t.removeEventListener("mousedown",r)}}}exports.Animations=Animations,exports.default=swipe$1;
